# -*- coding: utf-8 -*-
"""
===========================================================
 Python    : v3.9.0
 Project   : hotpot
 File      : co2adsorpTGA
 Created   : 2025/9/18 21:20
 Author    : Zhiyuan Zhang
 Python    : 
-----------------------------------------------------------
 Description
 ----------------------------------------------------------
 
===========================================================
"""
import numpy as np
from hotpot.plugins.DataGen.curve import plot_piecewise_colored_curve, curve_interpolate


if __name__ == '__main__':
    origin_colors = [
        "#0000FF",  # 蓝
        "#228B22",  # 绿
        "#B22222",  # 棕红
        "#FF00FF",  # 品红
        "#00008B",  # 深蓝
        "#005900",  # 暗绿
        "#018181",  # 靛蓝
        "#7F007F"   # 深紫
    ]


    # 三次样条插值示例
    # xi = [0,   10,   15,   20,   30,    50,   80,   120,  125,  130,  135,  140,  250,  375,  500,  1000, 1500, 2000]
    # yi = [101, 94.4, 94,   93.8, 93.7,  93.6, 93.5, 93.4, 93.2, 93.0, 93.1, 93.4, 94.5, 95.5, 97,   98.0, 98.5, 98.9]
    # yi = [100, 89.4, 88.9, 88.8, 88.7,  88.6, 88.5, 88.4, 88.2, 88.0, 88.1, 88.3, 88.9, 89.5, 90.5, 91.3, 91.5, 91.9] # NN-1@XGKCMU放大未优化
    # yi = [100, 92.4, 91.9, 91.8, 91.7,  91.6, 91.5, 91.3, 91.1, 91.0, 91.1, 91.4, 93.1, 93.9, 95.4, 96.3, 96.6, 97.0]  # NN-1@XGKCMU放大优化

    # 铝基NN-7@BUNKUS
    # name="铝基NN-7@BUNKUS"
    # xi = [0,   10,   15,   20,   30,    50,   80,   120,  125,  130,  135,  140,  250,  375,  500,  1000, 1500, 2000]
    # yi = [100, 84.4, 84.2, 84.1, 84.0,  83.95,83.9, 83.9, 83.8, 84.2, 85.4, 85.9, 87.6, 88.7, 89.7, 91.2, 91.3, 91.4]

    # # 铜基NN-4@XAFFUH
    # xi = [0,   10,   15,   20,   30,    50,    80,   120,  125,  130,  135,  140,  250,  375,  500,  1000, 1500, 2000]
    # yi = [100, 94.4, 94.2, 94.1, 94.0,  93.95, 93.9, 93.7, 93.4, 93.9, 94.1, 94.3, 95.1, 96.0, 96.8, 98.2, 98.9, 99.31]

    # # 铜基NN-4@XAFFUH
    # name = '铜基NN-4@XAFFUH'
    # xi = [0,   10,   15,   20,   30,    50,    80,   120,  125,  130,  135,  140,  250,  375,  500,  1000, 1500, 2000]
    # yi = [100, 90.4, 90.2, 90.1, 90.0,  89.95, 89.9, 89.6, 89.3, 89.7, 90.1, 90.3, 90.9, 91.4, 92.1, 93.6, 94.7, 94.8]

    # RN-5@AWUPOZ
    # name = '锆基RN-5@AWUPOZ'
    # xi = [0,   10,   15,   20,   30,    50,   80,   120,  125,  130,  135,  140,  250,  375,  500,  1000, 1500,  2000]
    # yi = [100, 87.4, 87.2, 87.1, 87.0,  86.95,86.9, 86.9, 86.8, 87.2, 87.7, 88.4, 90.1, 91.2, 92.1, 93.1, 93.15, 93.17]


    # 铁基NN-3@DKIUFA
    # name = '铁基NN-3@DKIUFA'
    # xi = [0,   10,   15,   20,   30,    50,    80,   120,  125,  130,  135,  140,  250,  375,  500,  1000, 1500, 2000]
    # yi = [100, 88.4, 88.2, 88.1, 88.0,  87.95, 87.9, 87.6, 87.0, 87.7, 87.8, 87.9, 89.4, 89.6, 89.7, 89.71,89.70,89.71]

    # name = '镍基RN-5@VAGMEX'
    # xi = [0,   10,   15,   20,   30,    50,    80,   120,  125,  130,  135,  140,  250,  375,  500,  1000, 1500, 2000]
    # yi = [100, 92.4, 92.2, 92.1, 92.0,  91.90, 91.9, 91.4, 91.0, 91.2, 91.8, 92.3, 93.7, 95.1, 96.7, 97.8, 98.3, 98.8]

    name = '乙二胺@MIL-101_'
    xi = [0,   10,   30,    50,   80,   100,  140,  150,   160,   182.5,  190,  200,  250,  300,   350,  400,  500]
    yi = [100, 92.0, 90.0,  89.0, 87.8, 87.2, 86.2, 86.03, 85.97, 85.95,  86.4, 86.9, 89.9, 91.95, 93.1, 93.5, 93.6]

    xj = [501,  510,  514,  518,  545,    590,  600,  650,  700,   750,  800,  935]
    yj = [94.7, 87.8, 87.0, 86.65, 86.46,  87.3, 87.8, 90.6, 92.31, 93.45,93.8, 93.9]

    xi += xj
    yi += yj

    X, Y = curve_interpolate(xi, yi)

    # 自定义分段点(以X中实际坐标分堆,例如以350,800,1500为分界)
    # seg_x = [0, 12.5, 115, 130, 2000]
    seg_x = [0, 12.5, 132, 183, 500, 501.6, 515, 545, 1000]
    idx_bounds = [np.searchsorted(X, xx, side='left') for xx in seg_x]
    plot_piecewise_colored_curve(
        X, Y,
        segment_bounds=idx_bounds,
        color_cycle=origin_colors,
        show_points=False,
        xi=xi, yi=yi,
        # title="Piecewise Colored Spline",
        xlabel="Time t (min)",
        ylabel="Weight (%)",
        save_path=f'...'
    )